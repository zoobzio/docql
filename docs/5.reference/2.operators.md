---
title: Operators Reference
description: Complete operator documentation
author: zoobzio
published: 2025-12-29
updated: 2025-12-29
tags:
  - Reference
  - Operators
---

# Operators Reference

Complete reference for all DOCQL operators.

## Filter Operators

### Comparison Operators

| Operator | Method | Description | MongoDB | DynamoDB | Firestore | CouchDB |
|----------|--------|-------------|---------|----------|-----------|---------|
| EQ | `Eq()` | Equal to | `$eq` | `=` | `==` | `$eq` |
| NE | `Ne()` | Not equal to | `$ne` | `<>` | `!=` | `$ne` |
| GT | `Gt()` | Greater than | `$gt` | `>` | `>` | `$gt` |
| GTE | `Gte()` | Greater than or equal | `$gte` | `>=` | `>=` | `$gte` |
| LT | `Lt()` | Less than | `$lt` | `<` | `<` | `$lt` |
| LTE | `Lte()` | Less than or equal | `$lte` | `<=` | `<=` | `$lte` |

**Example:**

```go
filter := instance.Gte(instance.F("users", "age"), instance.P("minAge"))
```

### Set Membership Operators

| Operator | Method | Description | MongoDB | DynamoDB | Firestore | CouchDB |
|----------|--------|-------------|---------|----------|-----------|---------|
| IN | `In()` | Value in set | `$in` | - | `in` | `$in` |
| NIN | `Nin()` | Value not in set | `$nin` | - | `not-in` | `$nin` |

**Example:**

```go
filter := instance.In(instance.F("users", "role"), instance.P("roles"))
```

### Element Operators

| Operator | Function | Description | MongoDB | DynamoDB | Firestore | CouchDB |
|----------|----------|-------------|---------|----------|-----------|---------|
| EXISTS | `Exists()` | Field exists | `$exists: true` | `attribute_exists` | - | `$exists` |
| NOT_EXISTS | `NotExists()` | Field doesn't exist | `$exists: false` | `attribute_not_exists` | - | `$exists` |

**Example:**

```go
filter := docql.Exists(instance.F("users", "email"))
```

### Evaluation Operators

| Operator | Function | Description | MongoDB | DynamoDB | Firestore | CouchDB |
|----------|----------|-------------|---------|----------|-----------|---------|
| REGEX | `Regex()` | Pattern match | `$regex` | - | - | `$regex` |
| TEXT | `TextSearch()` | Full-text search | `$text` | - | - | - |

**Example:**

```go
filter := docql.Regex(instance.F("users", "email"), instance.P("pattern"))
```

### Array Operators

| Operator | Function | Description | MongoDB | DynamoDB | Firestore | CouchDB |
|----------|----------|-------------|---------|----------|-----------|---------|
| ALL | `All()` | Contains all elements | `$all` | - | `array-contains` | - |
| SIZE | `Size()` | Array has size | `$size` | - | - | - |
| ELEM_MATCH | `ElemMatch()` | Element matches condition | `$elemMatch` | - | - | - |

**Example:**

```go
filter := docql.All(instance.F("posts", "tags"), instance.P("requiredTags"))
```

### Geospatial Operators

| Operator | Function | Description | MongoDB | DynamoDB | Firestore | CouchDB |
|----------|----------|-------------|---------|----------|-----------|---------|
| NEAR | `Geo()` | Near point | `$near` | - | - | - |

**Example:**

```go
filter := docql.Geo(
    instance.F("stores", "location"),
    instance.P("lon"),
    instance.P("lat"),
    instance.P("maxDistance"),
)
```

---

## Logical Operators

| Operator | Method | Description | MongoDB | DynamoDB | Firestore | CouchDB |
|----------|--------|-------------|---------|----------|-----------|---------|
| AND | `And()` | All conditions true | `$and` | `AND` | Implicit | `$and` |
| OR | `Or()` | Any condition true | `$or` | - | Limited | `$or` |
| NOR | `Nor()` | No condition true | `$nor` | - | - | `$nor` |

**Example:**

```go
filter := instance.And(
    instance.Eq(instance.F("users", "active"), instance.P("active")),
    instance.Gte(instance.F("users", "age"), instance.P("minAge")),
)
```

---

## Update Operators

### Field Update Operators

| Operator | Method | Description | MongoDB | DynamoDB |
|----------|--------|-------------|---------|----------|
| SET | `Set()` | Set field value | `$set` | `SET` |
| UNSET | `Unset()` | Remove field | `$unset` | `REMOVE` |
| INC | `Inc()` | Increment value | `$inc` | `ADD` |
| MUL | `Mul()` | Multiply value | `$mul` | - |

**Example:**

```go
query := docql.Update(instance.C("users")).
    Filter(instance.Eq(instance.F("users", "_id"), instance.P("id"))).
    Set(instance.F("users", "status"), instance.P("status")).
    Inc(instance.F("users", "loginCount"), instance.P("increment"))
```

### Array Update Operators

| Operator | Method | Description | MongoDB | DynamoDB |
|----------|--------|-------------|---------|----------|
| PUSH | `Push()` | Add to array | `$push` | `list_append` |
| PULL | `Pull()` | Remove from array | `$pull` | - |
| ADD_TO_SET | `AddToSet()` | Add unique to array | `$addToSet` | `ADD` (set) |

**Example:**

```go
query := docql.Update(instance.C("posts")).
    Filter(instance.Eq(instance.F("posts", "_id"), instance.P("id"))).
    Push(instance.F("posts", "tags"), instance.P("newTag"))
```

---

## Aggregation Operators

### Pipeline Stages

| Stage | Method | Description | MongoDB | CouchDB |
|-------|--------|-------------|---------|---------|
| $match | `Match()` | Filter documents | Yes | No |
| $group | `Group()` | Group and aggregate | Yes | No |
| $project | `Project()` | Reshape documents | Yes | No |
| $sort | `Sort()` | Order documents | Yes | No |
| $limit | `Limit()` | Limit results | Yes | No |
| $skip | `Skip()` | Skip documents | Yes | No |
| $unwind | `Unwind()` | Deconstruct arrays | Yes | No |
| $lookup | `Lookup()` | Join collections | Yes | No |

**Note:** Aggregation pipelines are only supported by MongoDB. Other providers return an error for aggregate operations.

**Example:**

```go
query := docql.Aggregate(instance.C("orders")).
    Match(instance.Eq(instance.F("orders", "status"), instance.P("status"))).
    Group(
        docql.FieldExpr(instance.F("orders", "customerId")),
        map[string]docql.Accumulator{
            "total": docql.Sum(docql.FieldExpr(instance.F("orders", "amount"))),
        },
    ).
    Sort(instance.F("orders", "total"), docql.Descending).
    Limit(10)
```

### Accumulator Operators

| Operator | Function | Description | MongoDB |
|----------|----------|-------------|---------|
| $sum | `Sum()` | Sum of values | `$sum` |
| $avg | `Avg()` | Average of values | `$avg` |
| $min | `Min()` | Minimum value | `$min` |
| $max | `Max()` | Maximum value | `$max` |
| $first | `First()` | First value in group | `$first` |
| $last | `Last()` | Last value in group | `$last` |
| $push | - | Array of values | `$push` |
| $addToSet | - | Unique array of values | `$addToSet` |
| count | `CountAcc()` | Count documents | `{$sum: 1}` |

**Example:**

```go
accumulators := map[string]docql.Accumulator{
    "totalAmount": docql.Sum(docql.FieldExpr(instance.F("orders", "amount"))),
    "avgAmount":   docql.Avg(docql.FieldExpr(instance.F("orders", "amount"))),
    "orderCount":  docql.CountAcc(),
}
```

---

## Sort Order

| Constant | Value | Description |
|----------|-------|-------------|
| `Ascending` | 1 | Sort A-Z, 0-9 |
| `Descending` | -1 | Sort Z-A, 9-0 |

**Example:**

```go
query := docql.Find(instance.C("users")).
    Sort(instance.F("users", "createdAt"), docql.Descending)
```

---

## Provider Support Matrix

### Filter Support

| Filter | MongoDB | DynamoDB | Firestore | CouchDB |
|--------|---------|----------|-----------|---------|
| Eq, Ne, Gt, Gte, Lt, Lte | Yes | Yes | Yes | Yes |
| In, Nin | Yes | No | Yes | Yes |
| Exists, NotExists | Yes | Yes | No | Yes |
| Regex | Yes | No | No | Yes |
| Text | Yes | No | No | No |
| And | Yes | Yes | Yes | Yes |
| Or | Yes | No | Limited | Yes |
| Nor | Yes | No | No | Yes |
| All, Size | Yes | No | Limited | No |
| ElemMatch | Yes | No | No | No |
| Geo | Yes | No | No | No |

### Aggregation Support

| Feature | MongoDB | DynamoDB | Firestore | CouchDB |
|---------|---------|----------|-----------|---------|
| Match | Yes | No | No | No |
| Group | Yes | No | No | No |
| Project | Yes | No | No | No |
| Sort | Yes | No | No | No |
| Limit/Skip | Yes | No | No | No |
| Unwind | Yes | No | No | No |
| Lookup | Yes | No | No | No |
| Accumulators | Yes | No | No | No |

### Update Support

| Feature | MongoDB | DynamoDB | Firestore | CouchDB |
|---------|---------|----------|-----------|---------|
| Set | Yes | Yes | Yes | Yes |
| Unset | Yes | Yes | Yes | No |
| Inc | Yes | Yes | No | No |
| Push/Pull | Yes | Yes | No | No |
| AddToSet | Yes | Yes | No | No |
| Upsert | Yes | Yes | Yes | Yes |
